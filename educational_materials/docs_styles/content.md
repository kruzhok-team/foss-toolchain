# Виды документации в проекте

## Мотивация

Мы часто слышим что код должен быть самодокументируемым и да мы должны к этому стремиться и 
избегать такого способа написания кода, который потребует такого же или большего количества 
комментариев. Привильное именование очень важно и существенно может повысить скорость пониманимания
логики, заложенной при реализации кода. При всем этом в проектах существует документация и 
мы часто обращаемся именно к ней чтобы начать пользоваться каким либо проектом или прояснить
тонкости реализации. Кроме того в проектах существуют, документы, которые могут описывать 
use-case, т.е. возможные сценарии использования, а так же документы которые говорят как нужно 
писать код, чтобы ваши изменения приняли в проект. Таким образом документация необходима и 
выполняет в зависимости вида документа, ту или иную роль. Например документация может служить 
как:

* точка входа в использование проекта
* "клетчатка" для переваривания информации, которая заключена в коде
* точка входа в контрибьюторы проекта
* правила использования

## Правила хорошей документации

Часто большие проекты публикуют так называемый "кодекс поведение" - что от вас ожидают если Вы 
хотите внести вклад в проект. Например для документация по GitHub описаны 
[хорошие практики](https://docs.github.com/en/contributing/writing-for-github-docs/best-practices-for-github-docs). 
В любом случае даже если проект не обладает отдельным документом на этот счет, можно собрать 
общие рекомендации, которые будут актуальны всегда:

* поставьте себя на место пользователя - подумайте для кого вы пишите: 
    * кто будет это читать; 
    * зачем они будут это читать (что их может привести в проект); 
    * что является ценностью для читателей; 
    * для чего еще они будут использовать ваш проект. 
* структурийте информацию как на уровне файлов так и внутри каждого файла - правильная структура 
поможет пользователю быстрее сориентироваться в информации и найти нужную.
* дайте контекст - объясните пользователю с какой точки он старует. Особенно это важно для проектов
которые используют аппаратные составляющие, когда помимо ПК нужно собрать схему или подключить 
устройство. [Пример](https://github.com/ai/size-limit#readme)

    Size Limit is a performance budget tool for JavaScript. It checks every commit on CI, calculates the real cost of your JS for end-users and throws an error if the cost exceeds the limit.

* пишите по возможности короткими емкими предложениями. Старайтесь не доносить более одной мысли
за параграф.
* напишите глоссарий - это позволить дать читателям понять, что Вы и они понимаете термины одинаково
* не заставляйте пользователя читать все - форматируйте документа, так что бы можно было легко 
найти нужную информацию, которая может выполнять роль точки входа и быть разной для разных 
пользователей. 

## Какой бывает документация

1. Документация на уровне проекта:

* README: содержит обзор проекта, включая инструкции по установке, примеры использования и 
ссылка на рекомендации по внесению вклада.
* LICENSE: определяет юридические условия использования и распространения программного обеспечения.
* CHANGELOG: перечисляет изменения в разных версиях программного обеспечения.
* CONTRIBUTING: рекомендации для разработчиков о том, как внести вклад в проект.
    * Как настроить среду разработки.
    * Стандарты кодирования и принятые практики.
    * Рекомендации по оформлению задач (issue) и запросов на слияние (merge-request).
    * Требования к тестированию перед отправкой изменений.
    * Как писать сообщения о коммите.
* CODE_OF_CONDUCT: определяет ожидаемое поведение и правила сообщества. 

2. Документация на уровне кода

* Docstrings: встроенная документация в функциях, классах и модулях; в Python оформляется 
с использованием тройных кавычек (""" """ или ''' ''').
* Аннотация типов: улучшает читаемость и помогает в статическом анализе, определяя ожидаемые 
типы данных (def add(a: int, b: int) -> int:).
* Встроенные комментарии: краткие пояснения в коде с использованием #. Хорошие комментарии 
включают:

    * Объяснение того, *почему* что-то сделано. Этот тип комментариев используется, когда код не требует пояснений что именно сделано, но требует пояснения причины почему это сделано.

```python
#good 
# Using a set for faster lookup, as searching in a set is O(1)
seen_numbers = set()

#bad
# Create an empty set
seen_numbers = set()
```
    * Комментарии TODO: Напоминание о необходимости реализовать или исправить что-то позже.

```python
#good
# TODO: Handle users older than 99
if user.age > 99:
    raise ValueError("Unsupported age")

# bad
# TODO: Fix this function
do_something()  # What needs to be fixed? Be specific.
```
    * Объяснение неочевидной бизнес-логики. Этот тип комментариев помогает прояснить сложную 
    или специфичную логику, которая может быть неочевидна сразу человеку не погруженному в 
    специфику.

```python
#good
# IONEX files contains values multiplied by 10 to keep it integer 
data = parsed_data / 10

#bad
# we devide by 10 
data = parsed_data / 10
```
    * Описание сделанных допущений

```python
# Assumption: The API response will always include a "status" key.
# This might change in future versions.
if response["status"] == "success":
    process_data(response["data"])
```

    *  Для документирования известных ограничений

```python
# Known issue: process_items() function fails for lists with more than 1000 elements
chunks = split(items, chunk=900)
result = []
for chunk in chunks: 
    result.extend(process_items(chunk))
```

    * Предупреждение о побочных эффектах - Когда код имеет сторонние эффекты, 
    которые могут быть неочевидны.

```python
# This function modifies the global configuration, which may affect other 
# parts of the system relying on the same settings.
update_global_config(new_config)
```

    * Предоставление контекста. Иногда коду может потребоваться контекст, который не ясен из 
    самого кода, а описывать почему так сделано может быть емко по объему. Этот тип комментария
    ссылается на проектную документацию, внешние ресурсы или требования.

```python
# Refer to the section 2.3 of the design doc for details on why this is necessary
validate_input(user_input)
```

3. Документация API

* OpenAPI/Swagger: Автоматически генерируемая документация API для веб-сервисов (например, с FastAPI).
* Sphinx: Преобразует строки документации Python в структурированную документацию.
* pydoc: Генерирует документацию Python из строк документации.

4. Документация по архитектуре и дизайну приложения

Здесь могут храниться различные диаграмму и документация по верхнеуровневому устройству проекта. 
Обычно предшествует обработке.

5. Документация по работе в вашим проектом

* Руководства по установке: пошаговые инструкции по настройке проекта.
* Руководства пользователя: объясняют, как использовать программное обеспечение с точки зрения конечного пользователя.
* Руководства разработчика: охватывают внутренние процессы разработки и стандарты кодирования.

